{"ast":null,"code":"import _defineProperty from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import{auth,database}from\"../config/firebase.utils\";import\"../styles/LoginStyles.css\";var INITIAL_STATE={username:\"\",email:\"\",password:\"\",error:false,touched:{username:false,email:false,password:false}};var SignUp=/*#__PURE__*/function(_Component){_inherits(SignUp,_Component);var _super=_createSuper(SignUp);function SignUp(props){var _this;_classCallCheck(this,SignUp);_this=_super.call(this,props);_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return auth.createUserWithEmailAndPassword(_this.state.email,_this.state.password);case 4:resp=_context.sent;_this.database=database.ref(\"users/\".concat(resp.user.uid)).set({username:_this.state.username});_this.props.history.push(\"/login\");_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);_this.setState(_objectSpread(_objectSpread({},INITIAL_STATE),{},{error:true}));case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(event){event.persist();_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleBlur=function(field){return function(event){_this.setState({touched:_objectSpread(_objectSpread({},_this.state.touched),{},_defineProperty({},field,true))});};};_this.validate=function(username,email,password){var errors={username:\"\",email:\"\",password:\"\"};if(_this.state.touched.username&&username.length<3)errors.username=\"Username should be >= 3 characters\";else if(_this.state.touched.username&&username.length>15)errors.username=\"Username should be <=15 characters\";var emailReg=/^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$/;if(_this.state.touched.email&&!emailReg.test(email))errors.email=\"Entered email is invalid\";var passwordReg=/^(?=.*[a-z])(?=.*[!-_.+@#$%^&*]).{5,}$/;if(_this.state.touched.password&&!passwordReg.test(password))errors.password=\"Password should have special character & length should be >= 5\";return errors;};_this.state=INITIAL_STATE;return _this;}_createClass(SignUp,[{key:\"render\",value:function render(){var errors=this.validate(this.state.username,this.state.email,this.state.password);return/*#__PURE__*/React.createElement(\"div\",{className:\"box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"box__header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"SignUp\"),/*#__PURE__*/React.createElement(\"span\",{className:\"validation-error\"},this.state.error?\"User already exists\":\"\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"inputbox\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"username\",name:\"username\",onBlur:this.handleBlur(\"username\"),value:this.state.username,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"User Name\"),/*#__PURE__*/React.createElement(\"span\",{className:\"errors\"},errors.username)),/*#__PURE__*/React.createElement(\"div\",{className:\"inputbox\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"email\",name:\"email\",onBlur:this.handleBlur(\"email\"),value:this.state.email,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Email\"),/*#__PURE__*/React.createElement(\"span\",{className:\"errors\"},errors.email)),/*#__PURE__*/React.createElement(\"div\",{className:\"inputbox\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"password\",name:\"password\",onBlur:this.handleBlur(\"password\"),value:this.state.password,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Password\"),/*#__PURE__*/React.createElement(\"span\",{className:\"errors\"},errors.password)),/*#__PURE__*/React.createElement(\"button\",{className:\"submit-button\",type:\"submit\",value:\"SignUp\"},\"SignUp\")),/*#__PURE__*/React.createElement(\"span\",{className:\"page-change\"},\"Already have an Account?\\xA0\\xA0\",/*#__PURE__*/React.createElement(Link,{to:\"/login\"},\"Login\")));}}]);return SignUp;}(Component);export default SignUp;","map":{"version":3,"sources":["/home/karthik/todo-app/src/components/SignUpComponent.jsx"],"names":["React","Component","Link","auth","database","INITIAL_STATE","username","email","password","error","touched","SignUp","props","handleSubmit","event","preventDefault","createUserWithEmailAndPassword","state","resp","ref","user","uid","set","history","push","setState","handleChange","persist","target","name","value","handleBlur","field","validate","errors","length","emailReg","test","passwordReg"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { auth, database } from \"../config/firebase.utils\";\nimport \"../styles/LoginStyles.css\";\n\nconst INITIAL_STATE = {\n  username: \"\",\n  email: \"\",\n  password: \"\",\n  error: false,\n  touched: {\n    username: false,\n    email: false,\n    password: false,\n  },\n};\n\nclass SignUp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = INITIAL_STATE;\n  }\n\n  handleSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      const resp = await auth.createUserWithEmailAndPassword(\n        this.state.email,\n        this.state.password\n      );\n      this.database = database\n        .ref(`users/${resp.user.uid}`)\n        .set({ username: this.state.username });\n      this.props.history.push(\"/login\");\n    } catch (err) {\n      this.setState({ ...INITIAL_STATE, error: true });\n    }\n  };\n\n  handleChange = (event) => {\n    event.persist();\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleBlur = (field) => (event) => {\n    this.setState({\n      touched: { ...this.state.touched, [field]: true },\n    });\n  };\n\n  validate = (username, email, password) => {\n    const errors = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n    };\n\n    if (this.state.touched.username && username.length < 3)\n      errors.username = \"Username should be >= 3 characters\";\n    else if (this.state.touched.username && username.length > 15)\n      errors.username = \"Username should be <=15 characters\";\n\n    const emailReg = /^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$/;\n    if (this.state.touched.email && !emailReg.test(email))\n      errors.email = \"Entered email is invalid\";\n\n    const passwordReg = /^(?=.*[a-z])(?=.*[!-_.+@#$%^&*]).{5,}$/;\n    if (this.state.touched.password && !passwordReg.test(password))\n      errors.password =\n        \"Password should have special character & length should be >= 5\";\n\n    return errors;\n  };\n\n  render() {\n    const errors = this.validate(\n      this.state.username,\n      this.state.email,\n      this.state.password\n    );\n\n    return (\n      <div className=\"box\">\n        <div className=\"box__header\">\n          <h1>SignUp</h1>\n          <span className=\"validation-error\">\n            {this.state.error ? \"User already exists\" : \"\"}\n          </span>\n        </div>\n\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"inputbox\">\n            <input\n              type=\"text\"\n              className=\"username\"\n              name=\"username\"\n              onBlur={this.handleBlur(\"username\")}\n              value={this.state.username}\n              onChange={this.handleChange}\n              required\n            />\n            <label>User Name</label>\n            <span className=\"errors\">{errors.username}</span>\n          </div>\n\n          <div className=\"inputbox\">\n            <input\n              type=\"text\"\n              className=\"email\"\n              name=\"email\"\n              onBlur={this.handleBlur(\"email\")}\n              value={this.state.email}\n              onChange={this.handleChange}\n              required\n            />\n            <label>Email</label>\n            <span className=\"errors\">{errors.email}</span>\n          </div>\n\n          <div className=\"inputbox\">\n            <input\n              type=\"password\"\n              className=\"password\"\n              name=\"password\"\n              onBlur={this.handleBlur(\"password\")}\n              value={this.state.password}\n              onChange={this.handleChange}\n              required\n            />\n            <label>Password</label>\n            <span className=\"errors\">{errors.password}</span>\n          </div>\n          <button className=\"submit-button\" type=\"submit\" value=\"SignUp\">\n            SignUp\n          </button>\n        </form>\n        <span className=\"page-change\">\n          Already have an Account?&nbsp;&nbsp;\n          <Link to=\"/login\">Login</Link>\n        </span>\n      </div>\n    );\n  }\n}\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}