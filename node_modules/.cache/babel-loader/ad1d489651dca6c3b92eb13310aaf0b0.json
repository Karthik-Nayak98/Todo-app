{"ast":null,"code":"import _defineProperty from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import{auth}from\"../config/firebase.utils\";import Spinner from\"react-spinner-material\";import\"../styles/LoginStyles.css\";var INITIAL_STATE={email:\"\",password:\"\",error:false,touched:{email:false,password:false},loading:false};var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this.setState({loading:true});_context.prev=2;_context.next=5;return auth.signInWithEmailAndPassword(_this.state.email,_this.state.password);case 5:// this.setState({ ...INITIAL_STATE, loading: false });\n_this.props.history.push(\"/todo\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);_this.setState(_objectSpread(_objectSpread({},INITIAL_STATE),{},{loading:false,error:true}));case 11:case\"end\":return _context.stop();}}},_callee,null,[[2,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleBlur=function(field){return function(event){_this.setState({touched:_objectSpread(_objectSpread({},_this.state.touched),{},_defineProperty({},field,true))});};};_this.validate=function(email,password){var errors={email:\"\",password:\"\"};var emailReg=/^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$/;if(_this.state.touched.email&&!emailReg.test(email))errors.email=\"Email is invalid\";var passwordReg=/^(?=.*[a-z])(?=.*[!-_.+@#$%^&*]).{5,}$/;if(_this.state.touched.password&&!passwordReg.test(password))errors.password=\"Password should have special character & length should be >= 5\";// errors.email.length && errors.password.length\n//   ? this.setState({ isEnabled: !this.state.isEnabled })\n//   : \"\";\nreturn errors;};_this.state=_objectSpread({},INITIAL_STATE);return _this;}_createClass(Login,[{key:\"render\",value:function render(){var errors=this.validate(this.state.email,this.state.password);return/*#__PURE__*/React.createElement(\"div\",{className:\"box\"},/*#__PURE__*/React.createElement(\"header\",{className:\"box__header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Login\"),/*#__PURE__*/React.createElement(\"span\",{className:\"validation-error\"},this.state.error?\"Invalid username or password\":\"\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"inputbox\"},/*#__PURE__*/React.createElement(\"input\",{// style={{ paddingLeft: \"4px\" }}\ntype:\"text\",className:\"mail\",name:\"email\",value:this.state.email,onChange:this.handleChange,onBlur:this.handleBlur(\"email\"),required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Email\"),/*#__PURE__*/React.createElement(\"span\",{className:\"errors\"},errors.email)),/*#__PURE__*/React.createElement(\"div\",{className:\"inputbox\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"pass\",name:\"password\",value:this.state.password,onChange:this.handleChange,onBlur:this.handleBlur(\"password\"),required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Password\"),/*#__PURE__*/React.createElement(\"span\",{className:\"errors\"},errors.password)),/*#__PURE__*/React.createElement(\"button\",{className:this.state.loading?\"submit-button loading\":\"submit-button\",type:\"submit\",value:\"Login\"},\"Login\",/*#__PURE__*/React.createElement(\"span\",{className:\"login-loader\"},/*#__PURE__*/React.createElement(Spinner,{radius:30,color:\"#fc6c85\",stroke:4,visible:this.state.loading})))),/*#__PURE__*/React.createElement(\"span\",{className:\"page-change\"},\"Don't have an Account?\\xA0\\xA0\",/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},\"SignUp\")));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/home/karthik/todo-app/src/components/LoginComponent.jsx"],"names":["React","Component","Link","auth","Spinner","INITIAL_STATE","email","password","error","touched","loading","Login","props","handleSubmit","event","preventDefault","setState","signInWithEmailAndPassword","state","history","push","handleChange","target","name","value","handleBlur","field","validate","errors","emailReg","test","passwordReg"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { auth } from \"../config/firebase.utils\";\nimport Spinner from \"react-spinner-material\";\nimport \"../styles/LoginStyles.css\";\n\nconst INITIAL_STATE = {\n  email: \"\",\n  password: \"\",\n  error: false,\n  touched: {\n    email: false,\n    password: false,\n  },\n  loading: false,\n};\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { ...INITIAL_STATE };\n  }\n\n  handleSubmit = async (event) => {\n    event.preventDefault();\n    this.setState({ loading: true });\n    try {\n      // await auth().setPersistence(auth.Auth.Persistence.SESSION);\n      await auth.signInWithEmailAndPassword(\n        this.state.email,\n        this.state.password\n      );\n      // this.setState({ ...INITIAL_STATE, loading: false });\n      this.props.history.push(\"/todo\");\n    } catch (err) {\n      this.setState({ ...INITIAL_STATE, loading: false, error: true });\n    }\n  };\n\n  handleChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleBlur = (field) => (event) => {\n    this.setState({ touched: { ...this.state.touched, [field]: true } });\n  };\n\n  validate = (email, password) => {\n    const errors = {\n      email: \"\",\n      password: \"\",\n    };\n\n    const emailReg = /^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$/;\n    if (this.state.touched.email && !emailReg.test(email))\n      errors.email = \"Email is invalid\";\n\n    const passwordReg = /^(?=.*[a-z])(?=.*[!-_.+@#$%^&*]).{5,}$/;\n    if (this.state.touched.password && !passwordReg.test(password))\n      errors.password =\n        \"Password should have special character & length should be >= 5\";\n\n    // errors.email.length && errors.password.length\n    //   ? this.setState({ isEnabled: !this.state.isEnabled })\n    //   : \"\";\n\n    return errors;\n  };\n\n  render() {\n    const errors = this.validate(this.state.email, this.state.password);\n\n    return (\n      <div className=\"box\">\n        <header className=\"box__header\">\n          <h1>Login</h1>\n          <span className=\"validation-error\">\n            {this.state.error ? \"Invalid username or password\" : \"\"}\n          </span>\n        </header>\n\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"inputbox\">\n            <input\n              // style={{ paddingLeft: \"4px\" }}\n              type=\"text\"\n              className=\"mail\"\n              name=\"email\"\n              value={this.state.email}\n              onChange={this.handleChange}\n              onBlur={this.handleBlur(\"email\")}\n              required\n            />\n            <label>Email</label>\n            <span className=\"errors\">{errors.email}</span>\n          </div>\n          <div className=\"inputbox\">\n            <input\n              type=\"password\"\n              className=\"pass\"\n              name=\"password\"\n              value={this.state.password}\n              onChange={this.handleChange}\n              onBlur={this.handleBlur(\"password\")}\n              required\n            />\n            <label>Password</label>\n            <span className=\"errors\">{errors.password}</span>\n          </div>\n          <button\n            className={\n              this.state.loading ? \"submit-button loading\" : \"submit-button\"\n            }\n            type=\"submit\"\n            value=\"Login\"\n          >\n            Login\n            <span className=\"login-loader\">\n              {\n                <Spinner\n                  radius={30}\n                  color={\"#fc6c85\"}\n                  stroke={4}\n                  visible={this.state.loading}\n                />\n              }\n            </span>\n          </button>\n        </form>\n\n        <span className=\"page-change\">\n          Don't have an Account?&nbsp;&nbsp;\n          <Link to=\"/signup\">SignUp</Link>\n        </span>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}