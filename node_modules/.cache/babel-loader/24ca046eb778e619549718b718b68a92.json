{"ast":null,"code":"import _classCallCheck from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{List}from\"./ListComponent\";import{database,auth}from\"../config/firebase.utils\";import\"../styles/MainStyles.css\";var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(props){var _this;_classCallCheck(this,Main);_this=_super.call(this,props);_this.handleChange=function(event){event.persist();_this.setState({currentTask:event.target.value});};_this.addItem=function(event){event.preventDefault();_this.database.push().set({task:_this.state.currentTask});_this.setState(function(){return{currentTask:\"\"};});_this.db.set({count:_this.state.count+1});};_this.deleteTask=function(itemId){_this.database.child(itemId).remove();_this.db.set({count:_this.state.count-1});_this.setState({count:_this.state.count-1});};_this.EditItem=function(itemId){var taskValue=_this.state.tasks.filter(function(item){return item.id===itemId;});_this.setState({currentTask:taskValue[0].value});// set the input field value\n};_this.logout=function(){auth.signOut();};_this.state={tasks:[],count:0,currentTask:\"\",username:\"\"};var uid=auth.currentUser.uid;_this.database=database.ref(\"users/\".concat(uid)).child(\"task\");_this.db=database.ref(\"users/\".concat(uid)).child(\"taskCount\");return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var previousTasks=this.state.tasks;var userId=auth.currentUser.uid;database.ref(\"users/\"+userId).once(\"value\").then(function(snapshot){var username=snapshot.val()&&snapshot.val().username||\"Anonymous\";_this2.setState({username:username});});this.db.on(\"value\",function(snapshot){var taskCount=snapshot.exists()?snapshot.val().count:0;_this2.setState({count:taskCount});});this.database.on(\"child_added\",function(snapshot){previousTasks.push({id:snapshot.key,value:snapshot.val().task});_this2.setState({tasks:previousTasks});});this.database.on(\"child_removed\",function(snapshot){var filteredArray=previousTasks.filter(function(item){return item.id!==snapshot.key;});_this2.setState({tasks:filteredArray});previousTasks=filteredArray;// to update the previous array after removing the item\n});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"display-name\"},\"Logged in as: \",/*#__PURE__*/React.createElement(\"span\",null,this.state.username)),/*#__PURE__*/React.createElement(\"button\",{onClick:this.logout,className:\"logout\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-sign-out\"}),\" Logout\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"card-header\"},\"Todo List App\"),/*#__PURE__*/React.createElement(\"form\",{className:\"todo-form\",onSubmit:this.addItem},/*#__PURE__*/React.createElement(\"div\",{className:\"task-input\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input-title\",type:\"text\",value:this.state.currentTask,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Enter task\")),/*#__PURE__*/React.createElement(\"button\",{className:\"todo__button\",type:\"submit\"},\"Add Task\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},this.state.tasks.length===0?/*#__PURE__*/React.createElement(\"h1\",{className:\"card-header\"},\"Nothing Left to do!! Enjoy your day\"):/*#__PURE__*/React.createElement(\"h1\",{className:\"card-header\"},this.state.count,\" Task to finish\"),/*#__PURE__*/React.createElement(List,{tasks:this.state.tasks,taskCompleted:this.taskCompleted,deleteItem:this.deleteTask,EditItem:this.EditItem}))));}}]);return Main;}(Component);export default Main;","map":{"version":3,"sources":["/home/karthik/todo-app/src/components/MainComponent.jsx"],"names":["React","Component","List","database","auth","Main","props","handleChange","event","persist","setState","currentTask","target","value","addItem","preventDefault","push","set","task","state","db","count","deleteTask","itemId","child","remove","EditItem","taskValue","tasks","filter","item","id","logout","signOut","username","uid","currentUser","ref","previousTasks","userId","once","then","snapshot","val","on","taskCount","exists","key","filteredArray","length","taskCompleted"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { List } from \"./ListComponent\";\nimport { database, auth } from \"../config/firebase.utils\";\nimport \"../styles/MainStyles.css\";\n\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tasks: [],\n      count: 0,\n      currentTask: \"\",\n      username: \"\",\n    };\n    const uid = auth.currentUser.uid;\n    this.database = database.ref(`users/${uid}`).child(\"task\");\n    this.db = database.ref(`users/${uid}`).child(\"taskCount\");\n  }\n\n  componentDidMount() {\n    let previousTasks = this.state.tasks;\n    const userId = auth.currentUser.uid;\n    database\n      .ref(\"users/\" + userId)\n      .once(\"value\")\n      .then((snapshot) => {\n        const username =\n          (snapshot.val() && snapshot.val().username) || \"Anonymous\";\n        this.setState({ username: username });\n      });\n\n    this.db.on(\"value\", (snapshot) => {\n      const taskCount = snapshot.exists() ? snapshot.val().count : 0;\n      this.setState({ count: taskCount });\n    });\n\n    this.database.on(\"child_added\", (snapshot) => {\n      previousTasks.push({\n        id: snapshot.key,\n        value: snapshot.val().task,\n      });\n\n      this.setState({\n        tasks: previousTasks,\n      });\n    });\n\n    this.database.on(\"child_removed\", (snapshot) => {\n      const filteredArray = previousTasks.filter((item) => {\n        return item.id !== snapshot.key;\n      });\n      this.setState({ tasks: filteredArray });\n      previousTasks = filteredArray; // to update the previous array after removing the item\n    });\n  }\n\n  handleChange = (event) => {\n    event.persist();\n    this.setState({\n      currentTask: event.target.value,\n    });\n  };\n\n  addItem = (event) => {\n    event.preventDefault();\n    this.database.push().set({\n      task: this.state.currentTask,\n    });\n\n    this.setState(() => ({\n      currentTask: \"\",\n    }));\n\n    this.db.set({\n      count: this.state.count + 1,\n    });\n  };\n\n  deleteTask = (itemId) => {\n    this.database.child(itemId).remove();\n    this.db.set({ count: this.state.count - 1 });\n    this.setState({ count: this.state.count - 1 });\n  };\n\n  EditItem = (itemId) => {\n    const taskValue = this.state.tasks.filter((item) => {\n      return item.id === itemId;\n    });\n    this.setState({ currentTask: taskValue[0].value }); // set the input field value\n  };\n\n  logout = () => {\n    auth.signOut();\n  };\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"column\">\n          <nav>\n            <p className=\"display-name\">\n              Logged in as: <span>{this.state.username}</span>\n            </p>\n            <button onClick={this.logout} className=\"logout\">\n              <i className=\"fa fa-sign-out\"></i> Logout\n            </button>\n          </nav>\n          <div className=\"card\">\n            <h1 className=\"card-header\">Todo List App</h1>\n            <form className=\"todo-form\" onSubmit={this.addItem}>\n              <div className=\"task-input\">\n                <input\n                  className=\"input-title\"\n                  type=\"text\"\n                  value={this.state.currentTask}\n                  onChange={this.handleChange}\n                  required\n                />\n                <label>Enter task</label>\n              </div>\n              <button className=\"todo__button\" type=\"submit\">\n                Add Task\n              </button>\n            </form>\n          </div>\n        </div>\n\n        <div className=\"column\">\n          <div className=\"card\">\n            {this.state.tasks.length === 0 ? (\n              <h1 className=\"card-header\">\n                Nothing Left to do!! Enjoy your day\n              </h1>\n            ) : (\n              <h1 className=\"card-header\">{this.state.count} Task to finish</h1>\n            )}\n\n            <List\n              tasks={this.state.tasks}\n              taskCompleted={this.taskCompleted}\n              deleteItem={this.deleteTask}\n              EditItem={this.EditItem}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}