{"ast":null,"code":"var _jsxFileName = \"/home/karthik/todo-app/src/components/MainComponent.jsx\";\nimport React, { Component } from \"react\";\nimport { List } from \"./ListComponent\";\nimport { database, auth } from \"../config/firebase.utils\";\nimport \"../styles/MainStyles.css\";\n\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      event.persist();\n      this.setState({\n        currentTask: event.target.value\n      });\n    };\n\n    this.addItem = event => {\n      event.preventDefault();\n      this.database.push().set({\n        task: this.state.currentTask\n      });\n      this.setState(() => ({\n        currentTask: \"\"\n      }));\n      this.db.set({\n        count: this.state.count + 1\n      });\n    };\n\n    this.deleteTask = itemId => {\n      this.database.child(itemId).remove();\n      this.db.set({\n        count: this.state.count - 1\n      });\n      this.setState({\n        count: this.state.count - 1\n      });\n    };\n\n    this.EditItem = itemId => {\n      const taskValue = this.state.tasks.filter(item => {\n        return item.id === itemId;\n      });\n      this.setState({\n        currentTask: taskValue[0].value\n      }); // set the input field value\n    };\n\n    this.logout = () => {\n      auth.signOut();\n    };\n\n    this.state = {\n      tasks: [],\n      count: 0,\n      currentTask: \"\",\n      username: \"\"\n    };\n    const uid = auth.currentUser.uid;\n    console.log(uid);\n    this.database = database.ref(`users/${uid}`).child(\"task\");\n    this.db = database.ref(`users/${uid}`).child(\"taskCount\");\n  }\n\n  componentDidMount() {\n    let previousTasks = this.state.tasks;\n    const userId = auth.currentUser.uid;\n    database.ref(\"users/\" + userId).once(\"value\").then(snapshot => {\n      const username = snapshot.val() && snapshot.val().username || \"Anonymous\";\n      this.setState({\n        username: username\n      });\n    });\n    this.db.on(\"value\", snapshot => {\n      const taskCount = snapshot.exists() ? snapshot.val().count : 0;\n      this.setState({\n        count: taskCount\n      });\n    });\n    this.database.on(\"child_added\", snapshot => {\n      previousTasks.push({\n        id: snapshot.key,\n        value: snapshot.val().task\n      });\n      this.setState({\n        tasks: previousTasks\n      });\n    });\n    this.database.on(\"child_removed\", snapshot => {\n      const filteredArray = previousTasks.filter(item => {\n        return item.id !== snapshot.key;\n      });\n      this.setState({\n        tasks: filteredArray\n      });\n      previousTasks = filteredArray; // to update the previous array after removing the item\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"display-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }, \"Logged as:\", \"\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }\n    }, this.state.username)), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.logout,\n      className: \"logout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-sign-out\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }), \" Logout\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, \"Todo List App\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"todo-form\",\n      onSubmit: this.addItem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"input-title\",\n      type: \"text\",\n      value: this.state.currentTask,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }, \"Enter task\")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"todo__button\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    }, \"Add Task\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }, this.state.tasks.length === 0 ? /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, \"Nothing Left to do!! Enjoy your day\") : /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }, this.state.count, \" Things to do\"), /*#__PURE__*/React.createElement(List, {\n      tasks: this.state.tasks,\n      taskCompleted: this.taskCompleted,\n      deleteItem: this.deleteTask,\n      EditItem: this.EditItem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["/home/karthik/todo-app/src/components/MainComponent.jsx"],"names":["React","Component","List","database","auth","Main","constructor","props","handleChange","event","persist","setState","currentTask","target","value","addItem","preventDefault","push","set","task","state","db","count","deleteTask","itemId","child","remove","EditItem","taskValue","tasks","filter","item","id","logout","signOut","username","uid","currentUser","console","log","ref","componentDidMount","previousTasks","userId","once","then","snapshot","val","on","taskCount","exists","key","filteredArray","render","length","taskCompleted"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,QAAT,EAAmBC,IAAnB,QAA+B,0BAA/B;AACA,OAAO,0BAAP;;AAEA,MAAMC,IAAN,SAAmBJ,SAAnB,CAA6B;AAC3BK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAoDnBC,YApDmB,GAoDHC,KAAD,IAAW;AACxBA,MAAAA,KAAK,CAACC,OAAN;AACA,WAAKC,QAAL,CAAc;AACZC,QAAAA,WAAW,EAAEH,KAAK,CAACI,MAAN,CAAaC;AADd,OAAd;AAGD,KAzDkB;;AAAA,SA2DnBC,OA3DmB,GA2DRN,KAAD,IAAW;AACnBA,MAAAA,KAAK,CAACO,cAAN;AACA,WAAKb,QAAL,CAAcc,IAAd,GAAqBC,GAArB,CAAyB;AACvBC,QAAAA,IAAI,EAAE,KAAKC,KAAL,CAAWR;AADM,OAAzB;AAIA,WAAKD,QAAL,CAAc,OAAO;AACnBC,QAAAA,WAAW,EAAE;AADM,OAAP,CAAd;AAIA,WAAKS,EAAL,CAAQH,GAAR,CAAY;AACVI,QAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE,KAAX,GAAmB;AADhB,OAAZ;AAGD,KAxEkB;;AAAA,SA0EnBC,UA1EmB,GA0ELC,MAAD,IAAY;AACvB,WAAKrB,QAAL,CAAcsB,KAAd,CAAoBD,MAApB,EAA4BE,MAA5B;AACA,WAAKL,EAAL,CAAQH,GAAR,CAAY;AAAEI,QAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE,KAAX,GAAmB;AAA5B,OAAZ;AACA,WAAKX,QAAL,CAAc;AAAEW,QAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE,KAAX,GAAmB;AAA5B,OAAd;AACD,KA9EkB;;AAAA,SAgFnBK,QAhFmB,GAgFPH,MAAD,IAAY;AACrB,YAAMI,SAAS,GAAG,KAAKR,KAAL,CAAWS,KAAX,CAAiBC,MAAjB,CAAyBC,IAAD,IAAU;AAClD,eAAOA,IAAI,CAACC,EAAL,KAAYR,MAAnB;AACD,OAFiB,CAAlB;AAGA,WAAKb,QAAL,CAAc;AAAEC,QAAAA,WAAW,EAAEgB,SAAS,CAAC,CAAD,CAAT,CAAad;AAA5B,OAAd,EAJqB,CAI+B;AACrD,KArFkB;;AAAA,SAuFnBmB,MAvFmB,GAuFV,MAAM;AACb7B,MAAAA,IAAI,CAAC8B,OAAL;AACD,KAzFkB;;AAGjB,SAAKd,KAAL,GAAa;AACXS,MAAAA,KAAK,EAAE,EADI;AAEXP,MAAAA,KAAK,EAAE,CAFI;AAGXV,MAAAA,WAAW,EAAE,EAHF;AAIXuB,MAAAA,QAAQ,EAAE;AAJC,KAAb;AAMA,UAAMC,GAAG,GAAGhC,IAAI,CAACiC,WAAL,CAAiBD,GAA7B;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACA,SAAKjC,QAAL,GAAgBA,QAAQ,CAACqC,GAAT,CAAc,SAAQJ,GAAI,EAA1B,EAA6BX,KAA7B,CAAmC,MAAnC,CAAhB;AACA,SAAKJ,EAAL,GAAUlB,QAAQ,CAACqC,GAAT,CAAc,SAAQJ,GAAI,EAA1B,EAA6BX,KAA7B,CAAmC,WAAnC,CAAV;AACD;;AAEDgB,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,aAAa,GAAG,KAAKtB,KAAL,CAAWS,KAA/B;AACA,UAAMc,MAAM,GAAGvC,IAAI,CAACiC,WAAL,CAAiBD,GAAhC;AACAjC,IAAAA,QAAQ,CACLqC,GADH,CACO,WAAWG,MADlB,EAEGC,IAFH,CAEQ,OAFR,EAGGC,IAHH,CAGSC,QAAD,IAAc;AAClB,YAAMX,QAAQ,GACXW,QAAQ,CAACC,GAAT,MAAkBD,QAAQ,CAACC,GAAT,GAAeZ,QAAlC,IAA+C,WADjD;AAEA,WAAKxB,QAAL,CAAc;AAAEwB,QAAAA,QAAQ,EAAEA;AAAZ,OAAd;AACD,KAPH;AASA,SAAKd,EAAL,CAAQ2B,EAAR,CAAW,OAAX,EAAqBF,QAAD,IAAc;AAChC,YAAMG,SAAS,GAAGH,QAAQ,CAACI,MAAT,KAAoBJ,QAAQ,CAACC,GAAT,GAAezB,KAAnC,GAA2C,CAA7D;AACA,WAAKX,QAAL,CAAc;AAAEW,QAAAA,KAAK,EAAE2B;AAAT,OAAd;AACD,KAHD;AAKA,SAAK9C,QAAL,CAAc6C,EAAd,CAAiB,aAAjB,EAAiCF,QAAD,IAAc;AAC5CJ,MAAAA,aAAa,CAACzB,IAAd,CAAmB;AACjBe,QAAAA,EAAE,EAAEc,QAAQ,CAACK,GADI;AAEjBrC,QAAAA,KAAK,EAAEgC,QAAQ,CAACC,GAAT,GAAe5B;AAFL,OAAnB;AAKA,WAAKR,QAAL,CAAc;AACZkB,QAAAA,KAAK,EAAEa;AADK,OAAd;AAGD,KATD;AAWA,SAAKvC,QAAL,CAAc6C,EAAd,CAAiB,eAAjB,EAAmCF,QAAD,IAAc;AAC9C,YAAMM,aAAa,GAAGV,aAAa,CAACZ,MAAd,CAAsBC,IAAD,IAAU;AACnD,eAAOA,IAAI,CAACC,EAAL,KAAYc,QAAQ,CAACK,GAA5B;AACD,OAFqB,CAAtB;AAGA,WAAKxC,QAAL,CAAc;AAAEkB,QAAAA,KAAK,EAAEuB;AAAT,OAAd;AACAV,MAAAA,aAAa,GAAGU,aAAhB,CAL8C,CAKf;AAChC,KAND;AAOD;;AAyCDC,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACa,EADb,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAO,KAAKjC,KAAL,CAAWe,QAAlB,CAFF,CADF,eAKE;AAAQ,MAAA,OAAO,EAAE,KAAKF,MAAtB;AAA8B,MAAA,SAAS,EAAC,QAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,YALF,CADF,eAUE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE;AAAM,MAAA,SAAS,EAAC,WAAhB;AAA4B,MAAA,QAAQ,EAAE,KAAKlB,OAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,aADZ;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,KAAK,EAAE,KAAKK,KAAL,CAAWR,WAHpB;AAIE,MAAA,QAAQ,EAAE,KAAKJ,YAJjB;AAKE,MAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARF,CADF,eAWE;AAAQ,MAAA,SAAS,EAAC,cAAlB;AAAiC,MAAA,IAAI,EAAC,QAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXF,CAFF,CAVF,CADF,eA+BE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKY,KAAL,CAAWS,KAAX,CAAiByB,MAAjB,KAA4B,CAA5B,gBACC;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CADD,gBAKC;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6B,KAAKlC,KAAL,CAAWE,KAAxC,kBANJ,eASE,oBAAC,IAAD;AACE,MAAA,KAAK,EAAE,KAAKF,KAAL,CAAWS,KADpB;AAEE,MAAA,aAAa,EAAE,KAAK0B,aAFtB;AAGE,MAAA,UAAU,EAAE,KAAKhC,UAHnB;AAIE,MAAA,QAAQ,EAAE,KAAKI,QAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,CADF,CA/BF,CADF;AAoDD;;AAjJ0B;;AAoJ7B,eAAetB,IAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { List } from \"./ListComponent\";\nimport { database, auth } from \"../config/firebase.utils\";\nimport \"../styles/MainStyles.css\";\n\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tasks: [],\n      count: 0,\n      currentTask: \"\",\n      username: \"\",\n    };\n    const uid = auth.currentUser.uid;\n    console.log(uid);\n    this.database = database.ref(`users/${uid}`).child(\"task\");\n    this.db = database.ref(`users/${uid}`).child(\"taskCount\");\n  }\n\n  componentDidMount() {\n    let previousTasks = this.state.tasks;\n    const userId = auth.currentUser.uid;\n    database\n      .ref(\"users/\" + userId)\n      .once(\"value\")\n      .then((snapshot) => {\n        const username =\n          (snapshot.val() && snapshot.val().username) || \"Anonymous\";\n        this.setState({ username: username });\n      });\n\n    this.db.on(\"value\", (snapshot) => {\n      const taskCount = snapshot.exists() ? snapshot.val().count : 0;\n      this.setState({ count: taskCount });\n    });\n\n    this.database.on(\"child_added\", (snapshot) => {\n      previousTasks.push({\n        id: snapshot.key,\n        value: snapshot.val().task,\n      });\n\n      this.setState({\n        tasks: previousTasks,\n      });\n    });\n\n    this.database.on(\"child_removed\", (snapshot) => {\n      const filteredArray = previousTasks.filter((item) => {\n        return item.id !== snapshot.key;\n      });\n      this.setState({ tasks: filteredArray });\n      previousTasks = filteredArray; // to update the previous array after removing the item\n    });\n  }\n\n  handleChange = (event) => {\n    event.persist();\n    this.setState({\n      currentTask: event.target.value,\n    });\n  };\n\n  addItem = (event) => {\n    event.preventDefault();\n    this.database.push().set({\n      task: this.state.currentTask,\n    });\n\n    this.setState(() => ({\n      currentTask: \"\",\n    }));\n\n    this.db.set({\n      count: this.state.count + 1,\n    });\n  };\n\n  deleteTask = (itemId) => {\n    this.database.child(itemId).remove();\n    this.db.set({ count: this.state.count - 1 });\n    this.setState({ count: this.state.count - 1 });\n  };\n\n  EditItem = (itemId) => {\n    const taskValue = this.state.tasks.filter((item) => {\n      return item.id === itemId;\n    });\n    this.setState({ currentTask: taskValue[0].value }); // set the input field value\n  };\n\n  logout = () => {\n    auth.signOut();\n  };\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"column\">\n          <nav>\n            <h3 className=\"display-name\">\n              Logged as:{\"\"}\n              <span>{this.state.username}</span>\n            </h3>\n            <button onClick={this.logout} className=\"logout\">\n              <i className=\"fa fa-sign-out\"></i> Logout\n            </button>\n          </nav>\n          <div className=\"card\">\n            <h1 className=\"card-header\">Todo List App</h1>\n            <form className=\"todo-form\" onSubmit={this.addItem}>\n              <div className=\"task-input\">\n                <input\n                  className=\"input-title\"\n                  type=\"text\"\n                  value={this.state.currentTask}\n                  onChange={this.handleChange}\n                  required\n                />\n                <label>Enter task</label>\n              </div>\n              <button className=\"todo__button\" type=\"submit\">\n                Add Task\n              </button>\n            </form>\n          </div>\n        </div>\n\n        <div className=\"column\">\n          <div className=\"card\">\n            {this.state.tasks.length === 0 ? (\n              <h1 className=\"card-header\">\n                Nothing Left to do!! Enjoy your day\n              </h1>\n            ) : (\n              <h1 className=\"card-header\">{this.state.count} Things to do</h1>\n            )}\n\n            <List\n              tasks={this.state.tasks}\n              taskCompleted={this.taskCompleted}\n              deleteItem={this.deleteTask}\n              EditItem={this.EditItem}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}