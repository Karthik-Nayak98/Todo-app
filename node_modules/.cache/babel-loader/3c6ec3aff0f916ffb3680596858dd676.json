{"ast":null,"code":"import _defineProperty from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import{auth,database}from\"../config/firebase.utils\";import Spinner from\"react-spinner-material\";import\"../styles/LoginStyles.css\";var INITIAL_STATE={username:\"\",email:\"\",password:\"\",error:false,touched:{username:false,email:false,password:false},loading:false};var SignUp=/*#__PURE__*/function(_Component){_inherits(SignUp,_Component);var _super=_createSuper(SignUp);function SignUp(props){var _this;_classCallCheck(this,SignUp);_this=_super.call(this,props);_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this.setState({loading:true});_context.prev=2;_context.next=5;return auth.createUserWithEmailAndPassword(_this.state.email,_this.state.password);case 5:resp=_context.sent;_this.database=database.ref(\"users/\".concat(resp.user.uid)).set({username:_this.state.username});_this.props.history.push(\"/todo\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);_this.setState(_objectSpread(_objectSpread({},INITIAL_STATE),{},{loading:false,error:true}));case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(event){event.persist();_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleBlur=function(field){return function(event){_this.setState({touched:_objectSpread(_objectSpread({},_this.state.touched),{},_defineProperty({},field,true))});};};_this.validate=function(username,email,password){var errors={username:\"\",email:\"\",password:\"\"};if(_this.state.touched.username&&username.length<3)errors.username=\"Username should be >= 3 characters\";else if(_this.state.touched.username&&username.length>15)errors.username=\"Username should be <=15 characters\";var emailReg=/^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$/;if(_this.state.touched.email&&!emailReg.test(email))errors.email=\"Entered email is invalid\";var passwordReg=/^(?=.*[a-z])(?=.*[!-_.+@#$%^&*]).{5,}$/;if(_this.state.touched.password&&!passwordReg.test(password))errors.password=\"Password should have special character & length should be >= 5\";return errors;};_this.state=_objectSpread({},INITIAL_STATE);return _this;}_createClass(SignUp,[{key:\"render\",value:function render(){var errors=this.validate(this.state.username,this.state.email,this.state.password);return/*#__PURE__*/React.createElement(\"div\",{className:\"box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"box__header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"SignUp\"),/*#__PURE__*/React.createElement(\"span\",{className:\"validation-error\"},this.state.error?\"User already exists\":\"\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"inputbox\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"username\",name:\"username\",onBlur:this.handleBlur(\"username\"),value:this.state.username,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"User Name\"),/*#__PURE__*/React.createElement(\"span\",{className:\"errors\"},errors.username)),/*#__PURE__*/React.createElement(\"div\",{className:\"inputbox\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"mail\",name:\"email\",onBlur:this.handleBlur(\"email\"),value:this.state.email,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Email\"),/*#__PURE__*/React.createElement(\"span\",{className:\"errors\"},errors.email)),/*#__PURE__*/React.createElement(\"div\",{className:\"inputbox\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"pass\",name:\"password\",onBlur:this.handleBlur(\"password\"),value:this.state.password,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Password\"),/*#__PURE__*/React.createElement(\"span\",{className:\"errors\"},errors.password)),/*#__PURE__*/React.createElement(\"button\",{className:this.state.loading?\"submit-button loading\":\"submit-button\",type:\"submit\",value:\"SignUp\"},\"SignUp\",/*#__PURE__*/React.createElement(\"span\",{className:\"login-loader signup-loader\"},/*#__PURE__*/React.createElement(Spinner,{radius:30,color:\"#fc6c85\",stroke:4,visible:this.state.loading})))),/*#__PURE__*/React.createElement(\"span\",{className:\"page-change\"},\"Already have an Account?\\xA0\\xA0\",/*#__PURE__*/React.createElement(Link,{to:\"/login\"},\"Login\")));}}]);return SignUp;}(Component);export default SignUp;","map":{"version":3,"sources":["/home/karthik/todo-app/src/components/SignUpComponent.jsx"],"names":["React","Component","Link","auth","database","Spinner","INITIAL_STATE","username","email","password","error","touched","loading","SignUp","props","handleSubmit","event","preventDefault","setState","createUserWithEmailAndPassword","state","resp","ref","user","uid","set","history","push","handleChange","persist","target","name","value","handleBlur","field","validate","errors","length","emailReg","test","passwordReg"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { auth, database } from \"../config/firebase.utils\";\nimport Spinner from \"react-spinner-material\";\nimport \"../styles/LoginStyles.css\";\n\nconst INITIAL_STATE = {\n  username: \"\",\n  email: \"\",\n  password: \"\",\n  error: false,\n  touched: {\n    username: false,\n    email: false,\n    password: false,\n  },\n  loading: false,\n};\n\nclass SignUp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { ...INITIAL_STATE };\n  }\n\n  handleSubmit = async (event) => {\n    event.preventDefault();\n    this.setState({ loading: true });\n    try {\n      const resp = await auth.createUserWithEmailAndPassword(\n        this.state.email,\n        this.state.password\n      );\n      this.database = database.ref(`users/${resp.user.uid}`).set({\n        username: this.state.username,\n      });\n      this.props.history.push(\"/todo\");\n    } catch (err) {\n      this.setState({ ...INITIAL_STATE, loading: false, error: true });\n    }\n  };\n\n  handleChange = (event) => {\n    event.persist();\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleBlur = (field) => (event) => {\n    this.setState({\n      touched: { ...this.state.touched, [field]: true },\n    });\n  };\n\n  validate = (username, email, password) => {\n    const errors = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n    };\n\n    if (this.state.touched.username && username.length < 3)\n      errors.username = \"Username should be >= 3 characters\";\n    else if (this.state.touched.username && username.length > 15)\n      errors.username = \"Username should be <=15 characters\";\n\n    const emailReg = /^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$/;\n    if (this.state.touched.email && !emailReg.test(email))\n      errors.email = \"Entered email is invalid\";\n\n    const passwordReg = /^(?=.*[a-z])(?=.*[!-_.+@#$%^&*]).{5,}$/;\n    if (this.state.touched.password && !passwordReg.test(password))\n      errors.password =\n        \"Password should have special character & length should be >= 5\";\n\n    return errors;\n  };\n\n  render() {\n    const errors = this.validate(\n      this.state.username,\n      this.state.email,\n      this.state.password\n    );\n\n    return (\n      <div className=\"box\">\n        <div className=\"box__header\">\n          <h1>SignUp</h1>\n          <span className=\"validation-error\">\n            {this.state.error ? \"User already exists\" : \"\"}\n          </span>\n        </div>\n\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"inputbox\">\n            <input\n              type=\"text\"\n              className=\"username\"\n              name=\"username\"\n              onBlur={this.handleBlur(\"username\")}\n              value={this.state.username}\n              onChange={this.handleChange}\n              required\n            />\n            <label>User Name</label>\n            <span className=\"errors\">{errors.username}</span>\n          </div>\n\n          <div className=\"inputbox\">\n            <input\n              type=\"text\"\n              className=\"mail\"\n              name=\"email\"\n              onBlur={this.handleBlur(\"email\")}\n              value={this.state.email}\n              onChange={this.handleChange}\n              required\n            />\n            <label>Email</label>\n            <span className=\"errors\">{errors.email}</span>\n          </div>\n\n          <div className=\"inputbox\">\n            <input\n              type=\"password\"\n              className=\"pass\"\n              name=\"password\"\n              onBlur={this.handleBlur(\"password\")}\n              value={this.state.password}\n              onChange={this.handleChange}\n              required\n            />\n            <label>Password</label>\n            <span className=\"errors\">{errors.password}</span>\n          </div>\n          <button\n            className={\n              this.state.loading ? \"submit-button loading\" : \"submit-button\"\n            }\n            type=\"submit\"\n            value=\"SignUp\"\n          >\n            SignUp\n            <span className=\"login-loader signup-loader\">\n              {\n                <Spinner\n                  radius={30}\n                  color={\"#fc6c85\"}\n                  stroke={4}\n                  visible={this.state.loading}\n                />\n              }\n            </span>\n          </button>\n        </form>\n\n        <span className=\"page-change\">\n          Already have an Account?&nbsp;&nbsp;\n          <Link to=\"/login\">Login</Link>\n        </span>\n      </div>\n    );\n  }\n}\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}