{"ast":null,"code":"var _jsxFileName = \"/home/karthik/todo-app/src/components/MainComponent.jsx\";\nimport React, { Component } from \"react\";\nimport { List } from \"./ListComponent\";\nimport { database, auth } from \"../config/firebase.utils\";\nimport \"../styles/MainStyles.css\";\n\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      event.persist();\n      this.setState({\n        currentTask: event.target.value\n      });\n    };\n\n    this.addItem = event => {\n      event.preventDefault();\n      this.database.push().set({\n        task: this.state.currentTask\n      });\n      this.setState(() => ({\n        currentTask: \"\"\n      }));\n      this.db.set({\n        count: this.state.count + 1\n      });\n    };\n\n    this.deleteTask = itemId => {\n      this.database.child(itemId).remove();\n      this.db.set({\n        count: this.state.count - 1\n      });\n      this.setState({\n        count: this.state.count - 1\n      });\n    };\n\n    this.EditItem = itemId => {\n      const taskValue = this.state.tasks.filter(item => {\n        return item.id === itemId;\n      });\n      this.setState({\n        currentTask: taskValue[0].value\n      }); // set the input field value\n    };\n\n    this.logout = () => {\n      auth().signOut();\n    };\n\n    this.state = {\n      tasks: [],\n      count: 0,\n      currentTask: \"\",\n      userName: \"\"\n    };\n    const uid = auth().currentUser.uid;\n    this.database = database().ref(`users/${uid}`).child(\"task\");\n    this.db = database().ref(`users/${uid}`).child(\"taskCount\");\n  }\n\n  componentDidMount() {\n    let previousTasks = this.state.tasks;\n    console.log(auth().currentUser.providerData);\n    this.db.on(\"value\", snapshot => {\n      const taskCount = snapshot.exists() ? snapshot.val().count : 0;\n      this.setState({\n        count: taskCount\n      });\n    });\n    this.database.on(\"child_added\", snapshot => {\n      previousTasks.push({\n        id: snapshot.key,\n        value: snapshot.val().task\n      });\n      this.setState({\n        tasks: previousTasks\n      });\n    });\n    this.database.on(\"child_removed\", snapshot => {\n      const filteredArray = previousTasks.filter(item => {\n        return item.id !== snapshot.key;\n      });\n      this.setState({\n        tasks: filteredArray\n      });\n      previousTasks = filteredArray; // to update the previous array after removing the item\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"display-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, \"Logged as: \", this.props.currentuser), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.logout,\n      className: \"logout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-sign-out\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    }), \" Logout\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, \"Todo List App\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"todo-form\",\n      onSubmit: this.addItem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"input-title\",\n      type: \"text\",\n      value: this.state.currentTask,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, \"Enter task\")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"todo__button\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 15\n      }\n    }, \"Add Task\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, this.state.tasks.length === 0 ? /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, \"Nothing Left to do!! Enjoy your day\") : /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 15\n      }\n    }, this.state.count, \" Things to do\"), /*#__PURE__*/React.createElement(List, {\n      tasks: this.state.tasks,\n      taskCompleted: this.taskCompleted,\n      deleteItem: this.deleteTask,\n      EditItem: this.EditItem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["/home/karthik/todo-app/src/components/MainComponent.jsx"],"names":["React","Component","List","database","auth","Main","constructor","props","handleChange","event","persist","setState","currentTask","target","value","addItem","preventDefault","push","set","task","state","db","count","deleteTask","itemId","child","remove","EditItem","taskValue","tasks","filter","item","id","logout","signOut","userName","uid","currentUser","ref","componentDidMount","previousTasks","console","log","providerData","on","snapshot","taskCount","exists","val","key","filteredArray","render","currentuser","length","taskCompleted"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,QAAT,EAAmBC,IAAnB,QAA+B,0BAA/B;AACA,OAAO,0BAAP;;AAEA,MAAMC,IAAN,SAAmBJ,SAAnB,CAA6B;AAC3BK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SA0CnBC,YA1CmB,GA0CHC,KAAD,IAAW;AACxBA,MAAAA,KAAK,CAACC,OAAN;AACA,WAAKC,QAAL,CAAc;AACZC,QAAAA,WAAW,EAAEH,KAAK,CAACI,MAAN,CAAaC;AADd,OAAd;AAGD,KA/CkB;;AAAA,SAiDnBC,OAjDmB,GAiDRN,KAAD,IAAW;AACnBA,MAAAA,KAAK,CAACO,cAAN;AACA,WAAKb,QAAL,CAAcc,IAAd,GAAqBC,GAArB,CAAyB;AACvBC,QAAAA,IAAI,EAAE,KAAKC,KAAL,CAAWR;AADM,OAAzB;AAIA,WAAKD,QAAL,CAAc,OAAO;AACnBC,QAAAA,WAAW,EAAE;AADM,OAAP,CAAd;AAIA,WAAKS,EAAL,CAAQH,GAAR,CAAY;AACVI,QAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE,KAAX,GAAmB;AADhB,OAAZ;AAGD,KA9DkB;;AAAA,SAgEnBC,UAhEmB,GAgELC,MAAD,IAAY;AACvB,WAAKrB,QAAL,CAAcsB,KAAd,CAAoBD,MAApB,EAA4BE,MAA5B;AACA,WAAKL,EAAL,CAAQH,GAAR,CAAY;AAAEI,QAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE,KAAX,GAAmB;AAA5B,OAAZ;AACA,WAAKX,QAAL,CAAc;AAAEW,QAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE,KAAX,GAAmB;AAA5B,OAAd;AACD,KApEkB;;AAAA,SAsEnBK,QAtEmB,GAsEPH,MAAD,IAAY;AACrB,YAAMI,SAAS,GAAG,KAAKR,KAAL,CAAWS,KAAX,CAAiBC,MAAjB,CAAyBC,IAAD,IAAU;AAClD,eAAOA,IAAI,CAACC,EAAL,KAAYR,MAAnB;AACD,OAFiB,CAAlB;AAGA,WAAKb,QAAL,CAAc;AAAEC,QAAAA,WAAW,EAAEgB,SAAS,CAAC,CAAD,CAAT,CAAad;AAA5B,OAAd,EAJqB,CAI+B;AACrD,KA3EkB;;AAAA,SA6EnBmB,MA7EmB,GA6EV,MAAM;AACb7B,MAAAA,IAAI,GAAG8B,OAAP;AACD,KA/EkB;;AAGjB,SAAKd,KAAL,GAAa;AACXS,MAAAA,KAAK,EAAE,EADI;AAEXP,MAAAA,KAAK,EAAE,CAFI;AAGXV,MAAAA,WAAW,EAAE,EAHF;AAIXuB,MAAAA,QAAQ,EAAE;AAJC,KAAb;AAMA,UAAMC,GAAG,GAAGhC,IAAI,GAAGiC,WAAP,CAAmBD,GAA/B;AACA,SAAKjC,QAAL,GAAgBA,QAAQ,GAAGmC,GAAX,CAAgB,SAAQF,GAAI,EAA5B,EAA+BX,KAA/B,CAAqC,MAArC,CAAhB;AACA,SAAKJ,EAAL,GAAUlB,QAAQ,GAAGmC,GAAX,CAAgB,SAAQF,GAAI,EAA5B,EAA+BX,KAA/B,CAAqC,WAArC,CAAV;AACD;;AAEDc,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,aAAa,GAAG,KAAKpB,KAAL,CAAWS,KAA/B;AACAY,IAAAA,OAAO,CAACC,GAAR,CAAYtC,IAAI,GAAGiC,WAAP,CAAmBM,YAA/B;AACA,SAAKtB,EAAL,CAAQuB,EAAR,CAAW,OAAX,EAAqBC,QAAD,IAAc;AAChC,YAAMC,SAAS,GAAGD,QAAQ,CAACE,MAAT,KAAoBF,QAAQ,CAACG,GAAT,GAAe1B,KAAnC,GAA2C,CAA7D;AACA,WAAKX,QAAL,CAAc;AAAEW,QAAAA,KAAK,EAAEwB;AAAT,OAAd;AACD,KAHD;AAKA,SAAK3C,QAAL,CAAcyC,EAAd,CAAiB,aAAjB,EAAiCC,QAAD,IAAc;AAC5CL,MAAAA,aAAa,CAACvB,IAAd,CAAmB;AACjBe,QAAAA,EAAE,EAAEa,QAAQ,CAACI,GADI;AAEjBnC,QAAAA,KAAK,EAAE+B,QAAQ,CAACG,GAAT,GAAe7B;AAFL,OAAnB;AAKA,WAAKR,QAAL,CAAc;AACZkB,QAAAA,KAAK,EAAEW;AADK,OAAd;AAGD,KATD;AAWA,SAAKrC,QAAL,CAAcyC,EAAd,CAAiB,eAAjB,EAAmCC,QAAD,IAAc;AAC9C,YAAMK,aAAa,GAAGV,aAAa,CAACV,MAAd,CAAsBC,IAAD,IAAU;AACnD,eAAOA,IAAI,CAACC,EAAL,KAAYa,QAAQ,CAACI,GAA5B;AACD,OAFqB,CAAtB;AAGA,WAAKtC,QAAL,CAAc;AAAEkB,QAAAA,KAAK,EAAEqB;AAAT,OAAd;AACAV,MAAAA,aAAa,GAAGU,aAAhB,CAL8C,CAKf;AAChC,KAND;AAOD;;AAyCDC,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACc,KAAK5C,KAAL,CAAW6C,WADzB,CADF,eAIE;AAAQ,MAAA,OAAO,EAAE,KAAKnB,MAAtB;AAA8B,MAAA,SAAS,EAAC,QAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,YAJF,CADF,eASE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE;AAAM,MAAA,SAAS,EAAC,WAAhB;AAA4B,MAAA,QAAQ,EAAE,KAAKlB,OAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,aADZ;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,KAAK,EAAE,KAAKK,KAAL,CAAWR,WAHpB;AAIE,MAAA,QAAQ,EAAE,KAAKJ,YAJjB;AAKE,MAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARF,CADF,eAWE;AAAQ,MAAA,SAAS,EAAC,cAAlB;AAAiC,MAAA,IAAI,EAAC,QAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXF,CAFF,CATF,CADF,eA8BE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKY,KAAL,CAAWS,KAAX,CAAiBwB,MAAjB,KAA4B,CAA5B,gBACC;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CADD,gBAKC;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6B,KAAKjC,KAAL,CAAWE,KAAxC,kBANJ,eASE,oBAAC,IAAD;AACE,MAAA,KAAK,EAAE,KAAKF,KAAL,CAAWS,KADpB;AAEE,MAAA,aAAa,EAAE,KAAKyB,aAFtB;AAGE,MAAA,UAAU,EAAE,KAAK/B,UAHnB;AAIE,MAAA,QAAQ,EAAE,KAAKI,QAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,CADF,CA9BF,CADF;AAmDD;;AAtI0B;;AAyI7B,eAAetB,IAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { List } from \"./ListComponent\";\nimport { database, auth } from \"../config/firebase.utils\";\nimport \"../styles/MainStyles.css\";\n\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tasks: [],\n      count: 0,\n      currentTask: \"\",\n      userName: \"\",\n    };\n    const uid = auth().currentUser.uid;\n    this.database = database().ref(`users/${uid}`).child(\"task\");\n    this.db = database().ref(`users/${uid}`).child(\"taskCount\");\n  }\n\n  componentDidMount() {\n    let previousTasks = this.state.tasks;\n    console.log(auth().currentUser.providerData);\n    this.db.on(\"value\", (snapshot) => {\n      const taskCount = snapshot.exists() ? snapshot.val().count : 0;\n      this.setState({ count: taskCount });\n    });\n\n    this.database.on(\"child_added\", (snapshot) => {\n      previousTasks.push({\n        id: snapshot.key,\n        value: snapshot.val().task,\n      });\n\n      this.setState({\n        tasks: previousTasks,\n      });\n    });\n\n    this.database.on(\"child_removed\", (snapshot) => {\n      const filteredArray = previousTasks.filter((item) => {\n        return item.id !== snapshot.key;\n      });\n      this.setState({ tasks: filteredArray });\n      previousTasks = filteredArray; // to update the previous array after removing the item\n    });\n  }\n\n  handleChange = (event) => {\n    event.persist();\n    this.setState({\n      currentTask: event.target.value,\n    });\n  };\n\n  addItem = (event) => {\n    event.preventDefault();\n    this.database.push().set({\n      task: this.state.currentTask,\n    });\n\n    this.setState(() => ({\n      currentTask: \"\",\n    }));\n\n    this.db.set({\n      count: this.state.count + 1,\n    });\n  };\n\n  deleteTask = (itemId) => {\n    this.database.child(itemId).remove();\n    this.db.set({ count: this.state.count - 1 });\n    this.setState({ count: this.state.count - 1 });\n  };\n\n  EditItem = (itemId) => {\n    const taskValue = this.state.tasks.filter((item) => {\n      return item.id === itemId;\n    });\n    this.setState({ currentTask: taskValue[0].value }); // set the input field value\n  };\n\n  logout = () => {\n    auth().signOut();\n  };\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"column\">\n          <nav>\n            <h3 className=\"display-name\">\n              Logged as: {this.props.currentuser}\n            </h3>\n            <button onClick={this.logout} className=\"logout\">\n              <i className=\"fa fa-sign-out\"></i> Logout\n            </button>\n          </nav>\n          <div className=\"card\">\n            <h1 className=\"card-header\">Todo List App</h1>\n            <form className=\"todo-form\" onSubmit={this.addItem}>\n              <div className=\"task-input\">\n                <input\n                  className=\"input-title\"\n                  type=\"text\"\n                  value={this.state.currentTask}\n                  onChange={this.handleChange}\n                  required\n                />\n                <label>Enter task</label>\n              </div>\n              <button className=\"todo__button\" type=\"submit\">\n                Add Task\n              </button>\n            </form>\n          </div>\n        </div>\n\n        <div className=\"column\">\n          <div className=\"card\">\n            {this.state.tasks.length === 0 ? (\n              <h1 className=\"card-header\">\n                Nothing Left to do!! Enjoy your day\n              </h1>\n            ) : (\n              <h1 className=\"card-header\">{this.state.count} Things to do</h1>\n            )}\n\n            <List\n              tasks={this.state.tasks}\n              taskCompleted={this.taskCompleted}\n              deleteItem={this.deleteTask}\n              EditItem={this.EditItem}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}