{"ast":null,"code":"import _objectSpread from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/karthik/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import{auth}from\"../config/firebase.utils\";import\"../styles/LoginStyles.css\";var INITIAL_STATE={email:\"\",password:\"\",error:false,touched:{email:false,password:false}};var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return auth.signInWithEmailAndPassword(_this.state.email,_this.state.password);case 4:user=_context.sent;_this.props.history.push(\"/todo\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);_this.setState({error:true,email:\"\",password:\"\",touched:{email:false,password:false}});case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleBlur=function(field){return function(event){_this.setState({touched:_objectSpread(_objectSpread({},_this.state.touched),{},_defineProperty({},field,true))});};};_this.validate=function(email,password){var errors={email:\"\",password:\"\"};var emailReg=/^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$/;if(_this.state.touched.email&&!emailReg.test(email))errors.email=\"Email is invalid\";var passwordReg=/^(?=.*[a-z])(?=.*[!-_.+@#$%^&*]).{5,}$/;if(_this.state.touched.password&&!passwordReg.test(password))errors.password=\"Password should have special character & length should be >= 5\";// errors.email.length && errors.password.length\n//   ? this.setState({ isEnabled: !this.state.isEnabled })\n//   : \"\";\nreturn errors;};_this.state=INITIAL_STATE;return _this;}_createClass(Login,[{key:\"render\",value:function render(){var errors=this.validate(this.state.email,this.state.password);return/*#__PURE__*/React.createElement(\"div\",{className:\"box\"},/*#__PURE__*/React.createElement(\"header\",{className:\"box__header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Login\"),/*#__PURE__*/React.createElement(\"span\",{className:\"validation-error\"},this.state.error?\"Invalid username or password\":\"\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"inputbox\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:errors.email.length?\"email\":\"error email\",name:\"email\",value:this.state.email,onChange:this.handleChange,onBlur:this.handleBlur(\"email\"),required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Email\"),/*#__PURE__*/React.createElement(\"span\",{className:\"errors\"},errors.email)),/*#__PURE__*/React.createElement(\"div\",{className:\"inputbox\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:errors.password?\"error password\":\"password\",name:\"password\",value:this.state.password,onChange:this.handleChange,onBlur:this.handleBlur(\"password\"),required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Password\"),/*#__PURE__*/React.createElement(\"span\",{className:\"errors\"},errors.password)),/*#__PURE__*/React.createElement(\"button\",{className:\"submit-button\",type:\"submit\",value:\"Login\"},\"Login\")),/*#__PURE__*/React.createElement(\"span\",{className:\"page-change\"},\"Don't have an Account?\\xA0\\xA0\",/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},\"SignUp\")));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/home/karthik/todo-app/src/components/LoginComponent.jsx"],"names":["React","Component","Link","auth","INITIAL_STATE","email","password","error","touched","Login","props","handleSubmit","event","preventDefault","signInWithEmailAndPassword","state","user","history","push","setState","handleChange","target","name","value","handleBlur","field","validate","errors","emailReg","test","passwordReg","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { auth } from \"../config/firebase.utils\";\nimport \"../styles/LoginStyles.css\";\n\nconst INITIAL_STATE = {\n  email: \"\",\n  password: \"\",\n  error: false,\n  touched: {\n    email: false,\n    password: false,\n  },\n};\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = INITIAL_STATE;\n  }\n\n  handleSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      const user = await auth.signInWithEmailAndPassword(\n        this.state.email,\n        this.state.password\n      );\n      this.props.history.push(\"/todo\");\n    } catch (err) {\n      this.setState({\n        error: true,\n        email: \"\",\n        password: \"\",\n        touched: { email: false, password: false },\n      });\n    }\n  };\n\n  handleChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleBlur = (field) => (event) => {\n    this.setState({ touched: { ...this.state.touched, [field]: true } });\n  };\n\n  validate = (email, password) => {\n    const errors = {\n      email: \"\",\n      password: \"\",\n    };\n\n    const emailReg = /^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$/;\n    if (this.state.touched.email && !emailReg.test(email))\n      errors.email = \"Email is invalid\";\n\n    const passwordReg = /^(?=.*[a-z])(?=.*[!-_.+@#$%^&*]).{5,}$/;\n    if (this.state.touched.password && !passwordReg.test(password))\n      errors.password =\n        \"Password should have special character & length should be >= 5\";\n\n    // errors.email.length && errors.password.length\n    //   ? this.setState({ isEnabled: !this.state.isEnabled })\n    //   : \"\";\n\n    return errors;\n  };\n\n  render() {\n    const errors = this.validate(this.state.email, this.state.password);\n\n    return (\n      <div className=\"box\">\n        <header className=\"box__header\">\n          <h1>Login</h1>\n          <span className=\"validation-error\">\n            {this.state.error ? \"Invalid username or password\" : \"\"}\n          </span>\n        </header>\n\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"inputbox\">\n            <input\n              type=\"text\"\n              className={errors.email.length ? \"email\" : \"error email\"}\n              name=\"email\"\n              value={this.state.email}\n              onChange={this.handleChange}\n              onBlur={this.handleBlur(\"email\")}\n              required\n            />\n            <label>Email</label>\n            <span className=\"errors\">{errors.email}</span>\n          </div>\n          <div className=\"inputbox\">\n            <input\n              type=\"password\"\n              className={errors.password ? \"error password\" : \"password\"}\n              name=\"password\"\n              value={this.state.password}\n              onChange={this.handleChange}\n              onBlur={this.handleBlur(\"password\")}\n              required\n            />\n            <label>Password</label>\n            <span className=\"errors\">{errors.password}</span>\n          </div>\n          <button className=\"submit-button\" type=\"submit\" value=\"Login\">\n            Login\n          </button>\n        </form>\n        <span className=\"page-change\">\n          Don't have an Account?&nbsp;&nbsp;\n          <Link to=\"/signup\">SignUp</Link>\n        </span>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}